{% extends 'base.html' %}

{% block content %}
<div class="profilepage">
    <div class="userprofile">
        {% if user.image %}
        <img src="{{ MEDIA_URL }}/{{ user.image }}" class="profilepic"/>
        {% else %}
        <img src="{{ MEDIA_URL }}/profilepics/default.jpg" class="profilepic"/>
        {% endif %}
        <p class=name> {{ user.first_name }} {{ user.last_name }}</p>
        <p class=username> @{{ user.username }}</p>
        <p class=name> Bio:</p>
        <p class=content> {{ user.bio }}</p>
        <span class=name>Email:</span><span class=content>{{ user.email }}</span>
        <p class=name> Following: {{ user.following }} </p>
        <p class=name> Follower: {{ user.follower }} </p>
        {% if request.user != user %}
        <div>
            <a href="//{{ request.get_host }}/useraccounts/follow/{{ user.username }}"><button type="button">Follow</button></a>
            <a href="//{{ request.get_host }}/useraccounts/unfollow/{{ user.username }}"><button type="button">Unfollow</button></a>
        </div>
        {% endif %}



    </div>
    <div class="useractivity">
        <ul>
            {% for user_post in user_posts %}
            <div class='post'>
                <p class='content'>Last update: {{ user_post.updated_at }}</p>
                <h2>
                    <h2 class="post_title">
                        Title: {{ user_post.title }}
                    </h2>
                </h2>
                <span class='username'>
                    By: @{{ user_post.user }}
                </span>
                <p class='content'>
                    {{ user_post.content }}
                </p>

                {% if request.user == user_post.user %}
                <p class='content'>
                    <a>
                        Likes: {{ user_post.likes }}
                    </a> | 
                    <a>
                        Dislikes: {{ user_post.dislikes }}
                    </a>
                </p>
                {% else %}
                <p class='content'>
                    <a href="//{{ request.get_host }}/posts/{{user_post.id}}/like">
                        Likes: {{ user_post.likes }}
                    </a> | 
                    <a href="//{{ request.get_host }}/posts/{{user_post.id}}/dislike">
                        Dislikes: {{ user_post.dislikes }}
                    </a>
                </p>

                {% endif %}
                
                {% if request.user == user_post.user %}
                <div class='content'>
                    <button>
                        <a href="//{{ request.get_host }}/posts/editpost/{{user_post.id}}">
                            Edit
                        </a>
                    </button>

                    <button>
                        <a href="//{{ request.get_host }}/posts/editpost/{{ user_post.id }}/delete">Delete</a>
                    </button>
                </div>
                {% endif %}
                <div class="signup">
                    
                </div>
            </div>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock content %}